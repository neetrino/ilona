# ============================================
# Ilona English Center - Environment Variables
# ============================================
# Copy this file to .env.local and fill in the values

# ============================================
# DATABASE (Neon PostgreSQL)
# ============================================
# IMPORTANT: Use the POOLED connection string from Neon dashboard for DATABASE_URL
# This prevents connection resets (error 10054) by using PgBouncer connection pooling
#
# Pooled connection for application (REQUIRED to prevent connection resets)
# Connection pool parameters help prevent "connection forcibly closed" errors:
# - connection_limit: Max connections in pool (recommended: 10-20, max: 100)
# - pool_timeout: Max time to wait for connection (seconds, recommended: 20-30)
# - connect_timeout: Connection timeout (seconds, recommended: 10-15)
#
# For Neon: Use the "Pooled" connection string from dashboard (includes ?pgbouncer=true)
# Or manually add: ?sslmode=require&connection_limit=10&pool_timeout=20&connect_timeout=10
DATABASE_URL="postgresql://user:password@ep-xxx-pooler.region.aws.neon.tech/ilona?sslmode=require&pgbouncer=true&connection_limit=10&pool_timeout=20&connect_timeout=10"
# Direct URL for migrations (without connection pooling - use "Direct" connection string)
DIRECT_URL="postgresql://user:password@ep-xxx.region.aws.neon.tech/ilona?sslmode=require"

# ============================================
# AUTHENTICATION
# ============================================
# Generate with: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-min-32-chars"
JWT_ACCESS_EXPIRATION="15m"
JWT_REFRESH_EXPIRATION="7d"

# ============================================
# NEXT.JS
# ============================================
# For local development, leave empty to auto-detect from browser
# For network access (WiFi), set to your IP address:
# NEXT_PUBLIC_APP_URL="http://192.168.1.100:3000"
# NEXT_PUBLIC_API_URL="http://192.168.1.100:4000/api"
NEXT_PUBLIC_APP_URL="http://localhost:3000"
NEXT_PUBLIC_API_URL="http://localhost:4000/api"

# ============================================
# NESTJS
# ============================================
API_PORT=4000
API_PREFIX="api"
# For network access, add your IP addresses (comma-separated):
# CORS_ORIGIN="http://localhost:3000,http://192.168.1.100:3000"
# In development, CORS allows all origins automatically
CORS_ORIGIN="http://localhost:3000"

# ============================================
# REDIS (Upstash)
# ============================================
REDIS_URL="redis://default:xxx@xxx.upstash.io:6379"

# ============================================
# FILE STORAGE (Cloudflare R2)
# ============================================
R2_ACCOUNT_ID="your-account-id"
R2_ACCESS_KEY_ID="your-access-key"
R2_SECRET_ACCESS_KEY="your-secret-key"
R2_BUCKET_NAME="ilona-files"
R2_PUBLIC_URL="https://files.ilona.edu"

# ============================================
# EMAIL (Resend)
# ============================================
RESEND_API_KEY="re_xxx"
EMAIL_FROM="noreply@ilona.edu"

# ============================================
# MONITORING (Sentry) - Optional
# ============================================
# SENTRY_DSN="https://xxx@sentry.io/xxx"

