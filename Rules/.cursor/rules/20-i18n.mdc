---
description: –ü—Ä–∞–≤–∏–ª–∞ –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ (i18n). –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å.
globs: ["**/*.tsx", "**/locales/**", "**/i18n/**", "**/translations/**"]
alwaysApply: false
---

# –ü–†–ê–í–ò–õ–ê –ò–ù–¢–ï–†–ù–ê–¶–ò–û–ù–ê–õ–ò–ó–ê–¶–ò–ò (i18n)

> –ú–∏—Ä –±–æ–ª—å—à–µ –æ–¥–Ω–æ–≥–æ —è–∑—ã–∫–∞. –ü–ª–∞–Ω–∏—Ä—É–π i18n —Å –Ω–∞—á–∞–ª–∞, –Ω–µ –¥–æ–±–∞–≤–ª—è–π –ø–æ—Ç–æ–º.

---

## üéØ –ì–õ–ê–í–ù–´–ï –ü–†–ò–ù–¶–ò–ü–´

1. **Externalise strings** ‚Äî –≤—Å–µ —Ç–µ–∫—Å—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
2. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –ª–æ–∫–∞–ª–∏** ‚Äî –¥–∞—Ç—ã, —á–∏—Å–ª–∞, –≤–∞–ª—é—Ç—ã
3. **RTL support** ‚Äî –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∞—Ä–∞–±—Å–∫–∞—è/–∏–≤—Ä–∏—Ç –≤–µ—Ä—Å–∏—è
4. **Fallback** ‚Äî –µ—Å–ª–∏ –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å default

---

## üåê NEXT.JS I18N

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (App Router)

```typescript
// next.config.js
module.exports = {
  i18n: {
    locales: ['en', 'ru', 'hy'],
    defaultLocale: 'en',
    localeDetection: true,
  },
};
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îî‚îÄ‚îÄ [locale]/           # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–µ–≥–º–µ–Ω—Ç –¥–ª—è —è–∑—ã–∫–∞
‚îÇ       ‚îú‚îÄ‚îÄ layout.tsx
‚îÇ       ‚îú‚îÄ‚îÄ page.tsx
‚îÇ       ‚îî‚îÄ‚îÄ products/
‚îÇ           ‚îî‚îÄ‚îÄ page.tsx
‚îÇ
‚îú‚îÄ‚îÄ locales/
‚îÇ   ‚îú‚îÄ‚îÄ en/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common.json     # –û–±—â–∏–µ —Å—Ç—Ä–æ–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.json       # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products.json   # –ü—Ä–æ–¥—É–∫—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ errors.json     # –û—à–∏–±–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ ru/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common.json
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ hy/
‚îÇ       ‚îú‚îÄ‚îÄ common.json
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îî‚îÄ‚îÄ lib/
    ‚îî‚îÄ‚îÄ i18n/
        ‚îú‚îÄ‚îÄ index.ts        # –ì–ª–∞–≤–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç
        ‚îú‚îÄ‚îÄ config.ts       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        ‚îî‚îÄ‚îÄ getDictionary.ts
```

### –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

```json
// locales/en/common.json
{
  "nav": {
    "home": "Home",
    "products": "Products",
    "cart": "Cart",
    "account": "Account"
  },
  "buttons": {
    "submit": "Submit",
    "cancel": "Cancel",
    "save": "Save",
    "delete": "Delete"
  },
  "messages": {
    "loading": "Loading...",
    "error": "Something went wrong",
    "success": "Success!"
  }
}

// locales/ru/common.json
{
  "nav": {
    "home": "–ì–ª–∞–≤–Ω–∞—è",
    "products": "–¢–æ–≤–∞—Ä—ã",
    "cart": "–ö–æ—Ä–∑–∏–Ω–∞",
    "account": "–ê–∫–∫–∞—É–Ω—Ç"
  },
  "buttons": {
    "submit": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å",
    "cancel": "–û—Ç–º–µ–Ω–∞",
    "save": "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",
    "delete": "–£–¥–∞–ª–∏—Ç—å"
  },
  "messages": {
    "loading": "–ó–∞–≥—Ä—É–∑–∫–∞...",
    "error": "–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫",
    "success": "–£—Å–ø–µ—à–Ω–æ!"
  }
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (Server Components)

```typescript
// lib/i18n/getDictionary.ts
import 'server-only';

const dictionaries = {
  en: () => import('@/locales/en/common.json').then((m) => m.default),
  ru: () => import('@/locales/ru/common.json').then((m) => m.default),
  hy: () => import('@/locales/hy/common.json').then((m) => m.default),
};

export type Locale = keyof typeof dictionaries;

export async function getDictionary(locale: Locale) {
  return dictionaries[locale]();
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Server Component
// app/[locale]/page.tsx
export default async function Page({ params }: { params: { locale: Locale } }) {
  const dict = await getDictionary(params.locale);
  
  return (
    <main>
      <h1>{dict.nav.home}</h1>
      <button>{dict.buttons.submit}</button>
    </main>
  );
}
```

### Client Components (next-intl)

```typescript
// –£—Å—Ç–∞–Ω–æ–≤–∫–∞: npm install next-intl

// lib/i18n/config.ts
import { getRequestConfig } from 'next-intl/server';

export default getRequestConfig(async ({ locale }) => ({
  messages: (await import(`@/locales/${locale}/common.json`)).default,
}));

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Client Component
'use client';

import { useTranslations } from 'next-intl';

export function ProductCard({ product }: Props) {
  const t = useTranslations('products');
  
  return (
    <div>
      <h3>{product.name}</h3>
      <button>{t('addToCart')}</button>
    </div>
  );
}
```

---

## üî¢ –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–ï

### –ß–∏—Å–ª–∞

```typescript
// lib/i18n/formatters.ts

export function formatNumber(
  value: number,
  locale: string,
  options?: Intl.NumberFormatOptions,
): string {
  return new Intl.NumberFormat(locale, options).format(value);
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
formatNumber(1234567.89, 'en');    // "1,234,567.89"
formatNumber(1234567.89, 'ru');    // "1 234 567,89"
formatNumber(1234567.89, 'de');    // "1.234.567,89"
```

### –í–∞–ª—é—Ç—ã

```typescript
export function formatCurrency(
  amount: number,
  currency: string,
  locale: string,
): string {
  return new Intl.NumberFormat(locale, {
    style: 'currency',
    currency,
  }).format(amount);
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
formatCurrency(99.99, 'USD', 'en');    // "$99.99"
formatCurrency(99.99, 'RUB', 'ru');    // "99,99 ‚ÇΩ"
formatCurrency(99.99, 'AMD', 'hy');    // "99,99 ÷è"
formatCurrency(99.99, 'EUR', 'de');    // "99,99 ‚Ç¨"
```

### –î–∞—Ç—ã

```typescript
export function formatDate(
  date: Date | string,
  locale: string,
  options?: Intl.DateTimeFormatOptions,
): string {
  const d = typeof date === 'string' ? new Date(date) : date;
  
  return new Intl.DateTimeFormat(locale, {
    dateStyle: 'medium',
    ...options,
  }).format(d);
}

export function formatDateTime(
  date: Date | string,
  locale: string,
): string {
  const d = typeof date === 'string' ? new Date(date) : date;
  
  return new Intl.DateTimeFormat(locale, {
    dateStyle: 'medium',
    timeStyle: 'short',
  }).format(d);
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
formatDate(new Date(), 'en');    // "Jan 15, 2024"
formatDate(new Date(), 'ru');    // "15 —è–Ω–≤. 2024 –≥."
formatDate(new Date(), 'de');    // "15.01.2024"
```

### –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è

```typescript
export function formatRelativeTime(
  date: Date | string,
  locale: string,
): string {
  const d = typeof date === 'string' ? new Date(date) : date;
  const now = new Date();
  const diffInSeconds = Math.floor((now.getTime() - d.getTime()) / 1000);
  
  const rtf = new Intl.RelativeTimeFormat(locale, { numeric: 'auto' });
  
  if (diffInSeconds < 60) {
    return rtf.format(-diffInSeconds, 'second');
  }
  if (diffInSeconds < 3600) {
    return rtf.format(-Math.floor(diffInSeconds / 60), 'minute');
  }
  if (diffInSeconds < 86400) {
    return rtf.format(-Math.floor(diffInSeconds / 3600), 'hour');
  }
  return rtf.format(-Math.floor(diffInSeconds / 86400), 'day');
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
formatRelativeTime(fiveMinutesAgo, 'en');    // "5 minutes ago"
formatRelativeTime(fiveMinutesAgo, 'ru');    // "5 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥"
```

---

## üìù PLURALIZATION

### –ü—Ä–∞–≤–∏–ª–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞

```json
// locales/en/products.json
{
  "itemCount": {
    "zero": "No items",
    "one": "1 item",
    "other": "{count} items"
  }
}

// locales/ru/products.json
{
  "itemCount": {
    "zero": "–ù–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤",
    "one": "{count} —Ç–æ–≤–∞—Ä",
    "few": "{count} —Ç–æ–≤–∞—Ä–∞",
    "many": "{count} —Ç–æ–≤–∞—Ä–æ–≤",
    "other": "{count} —Ç–æ–≤–∞—Ä–æ–≤"
  }
}
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

```typescript
// lib/i18n/pluralize.ts

export function pluralize(
  count: number,
  forms: Record<string, string>,
  locale: string,
): string {
  const pluralRules = new Intl.PluralRules(locale);
  const form = pluralRules.select(count);
  
  const template = forms[form] || forms.other;
  return template.replace('{count}', count.toString());
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
pluralize(0, dict.itemCount, 'en');   // "No items"
pluralize(1, dict.itemCount, 'en');   // "1 item"
pluralize(5, dict.itemCount, 'en');   // "5 items"

pluralize(1, dict.itemCount, 'ru');   // "1 —Ç–æ–≤–∞—Ä"
pluralize(2, dict.itemCount, 'ru');   // "2 —Ç–æ–≤–∞—Ä–∞"
pluralize(5, dict.itemCount, 'ru');   // "5 —Ç–æ–≤–∞—Ä–æ–≤"
pluralize(21, dict.itemCount, 'ru');  // "21 —Ç–æ–≤–∞—Ä"
```

---

## üîÑ –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –Ø–ó–´–ö–ê

### Language Switcher

```tsx
// components/LanguageSwitcher.tsx
'use client';

import { usePathname, useRouter } from 'next/navigation';

const LOCALES = [
  { code: 'en', name: 'English', flag: 'üá∫üá∏' },
  { code: 'ru', name: '–†—É—Å—Å–∫–∏–π', flag: 'üá∑üá∫' },
  { code: 'hy', name: '’Ä’°’µ’•÷Ädelays', flag: 'üá¶üá≤' },
];

export function LanguageSwitcher({ currentLocale }: { currentLocale: string }) {
  const router = useRouter();
  const pathname = usePathname();

  const switchLocale = (newLocale: string) => {
    // –ó–∞–º–µ–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –ª–æ–∫–∞–ª—å –≤ –ø—É—Ç–∏
    const newPath = pathname.replace(`/${currentLocale}`, `/${newLocale}`);
    router.push(newPath);
  };

  return (
    <select
      value={currentLocale}
      onChange={(e) => switchLocale(e.target.value)}
      className="border rounded p-2"
    >
      {LOCALES.map((locale) => (
        <option key={locale.code} value={locale.code}>
          {locale.flag} {locale.name}
        </option>
      ))}
    </select>
  );
}
```

---

## üö´ –ê–ù–¢–ò–ü–ê–¢–¢–ï–†–ù–´

### ‚ùå –ù–µ –¥–µ–ª–∞–π

```tsx
// ‚ùå –•–∞—Ä–¥–∫–æ–¥ —Ç–µ–∫—Å—Ç–æ–≤
<button>Submit</button>
<p>Your order has been placed</p>

// ‚ùå –ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ (–ª–æ–º–∞–µ—Ç –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤)
const message = `Hello, ` + userName + `! You have ` + count + ` items.`;

// ‚ùå –•–∞—Ä–¥–∫–æ–¥ —Ñ–æ—Ä–º–∞—Ç–æ–≤
const date = `${d.getMonth()}/${d.getDate()}/${d.getFullYear()}`; // US —Ñ–æ—Ä–º–∞—Ç
const price = `$${amount.toFixed(2)}`; // –î–æ–ª–ª–∞—Ä—ã –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã

// ‚ùå –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –∫–æ–¥–µ
const translations = {
  en: { hello: 'Hello' },
  ru: { hello: '–ü—Ä–∏–≤–µ—Ç' },
};
```

### ‚úÖ –î–µ–ª–∞–π

```tsx
// ‚úÖ –í—Å–µ —Ç–µ–∫—Å—Ç—ã –∏–∑ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
<button>{t('buttons.submit')}</button>
<p>{t('orders.success')}</p>

// ‚úÖ –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è
// –í JSON: "greeting": "Hello, {name}! You have {count} items."
t('greeting', { name: userName, count: itemCount })

// ‚úÖ Intl API –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
formatDate(date, locale)
formatCurrency(amount, currency, locale)

// ‚úÖ –ü–µ—Ä–µ–≤–æ–¥—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö JSON —Ñ–∞–π–ª–∞—Ö
// locales/en/common.json
// locales/ru/common.json
```

---

## üìã CHECKLIST

### –ù–∞—á–∞–ª–æ –ø—Ä–æ–µ–∫—Ç–∞

- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏
- [ ] –í—ã–±—Ä–∞–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (next-intl, react-intl, etc.)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω fallback –Ω–∞ default locale

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

- [ ] –í—Å–µ —Ç–µ–∫—Å—Ç—ã –≤ —Ñ–∞–π–ª–∞—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- [ ] –ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ —Ç–µ–∫—Å—Ç–æ–≤ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Intl API –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] Pluralization –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] Language switcher —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º

- [ ] –í—Å–µ —Å—Ç—Ä–æ–∫–∏ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ –≤—Å–µ —è–∑—ã–∫–∏
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —è–∑—ã–∫–∞—Ö
- [ ] –î–∞—Ç—ã/—á–∏—Å–ª–∞/–≤–∞–ª—é—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ú–∞–∫–µ—Ç –Ω–µ –ª–æ–º–∞–µ—Ç—Å—è –æ—Ç –¥–ª–∏–Ω–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- [ ] SEO: hreflang —Ç–µ–≥–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã

---

**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** 2025-01-31
